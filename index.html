<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> Stan Creator Challenge </title>
    <link href = 'challenge.css' rel = 'stylesheet'></link>
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;1,200;1,300;1,400;1,500;1,600;1,700;1,800&display=swap" rel="stylesheet">
</head>
<body>

    <div id = 'navbar'>
        <a href = 'index.html'>
            <img src = 'assets/stan.png' alt = 'logo'>
        </a>

        <div id = 'bars'>
            <div class = 'bar one'> </div>
            <div class = 'bar two'></div>
        </div>

        <div id = 'nav'>
            <a href = 'index.html'>
                <h2 class = 'navbtn'> Enter Challenge </h2>
            </a>
            <a href = 'guide.html'>
                <h2 class = 'navbtn'> What Products Should I Sell? </h2>
            </a>
            <a href = 'faq.html'>
                <h2 class = 'navbtn'> FAQ </h2>
            </a>
        </div>
    </div>

    <div id = 'main'>

        <div id = 'box'>
            <h1 class = 'big'>
                Join Stan‚Äôs
                <span> Creator Business Challenge! </span>
                <span id = 'rocket'> üöÄ </span>
            </h1>

            <div class = 'list'>

                <div class = 'form'>

                    <h1> Create Your Stan Store </h1>

                    <div class = 'field'>
                        <h3> üíÅ‚Äç‚ôÇÔ∏è </h3>
                        <input id = 'name' placeholder = 'Full Name' type = 'text' pattern = '/^[a-zA-Z0-9_-]+$/'>
                    </div>

                    <div class = 'field'>
                        <h3 class = 'a'> @</h3>
                        <input id = 'username' placeholder = 'Create a Username' type = 'text'>
                    </div>
                        <h2 id = 'username_msg' class = 'msg'>
                            Username can only contain letters [A-Z, a-z], numbers [0-9], dashes & underscores [-_ ]!
                        </h2>
                        <h2 id = 'username_msg_2' class = 'msg'>
                            This username is already taken. Try another one!
                        </h2>


                    <div class = 'field'>
                        <h3> ‚úâÔ∏è </h3>
                        <input id = 'email' placeholder = 'Email' type = 'email'>
                    </div>
                        <h2 id = 'email_msg' class = 'msg'>
                            Please enter a valid email!
                        </h2>
                        <h2 id = 'email_msg_2' class = 'msg'>
                            This email is already taken.
                        </h2>

                    <div class = 'field'>
                        <h3> üîë </h3>
                        <input id = 'password' placeholder = 'Password' type = 'password'>

                    </div>
                        <h2 id = 'password_msg' class = 'msg'>
                            Password must be at least 6 characters!
                        </h2>

                    <div class = 'field'>
                        <h3> üîë </h3>
                        <input id = 'password2' placeholder = 'Confirm Password' type = 'password'>
                    </div>
                        <h2 id = 'password2_msg' class = 'msg'>
                            Passwords must match!
                        </h2>

                    <button id = 'submit'> Get Started ‚Üí </button>
                </div>

            </div>
        </div>

        <div id = 'graphic'>

            <div id = 'sec1' class = 'sec active'>

                <video id = 'video' poster="assets/thumbnail.png" width="1920" height="1080" controls>
                    <source src="assets/challenge.mp4" type="video/mp4">
                    Your browser does not support the video tag.
                </video>

                <div class = 'tagline'>
                    <h2>
                    <span> Launch your Creator Business </span> on Stan before Oct 15 for a chance to win
                    </h2>
                    <img src = 'assets/10k.png' alt = '$10,000'>
                </div>

                <div class = 'expo'>
                    <h1> How It Works </h1>

                    <div class = 'row'>
                        <h3 class = 'num'> 1 </h3>
                        <h2> Create your Stan Store before October 15  </h2>
                    </div>

                    <div class = 'row'>
                        <h3 class = 'num'> 2 </h3>
                        <h2> Go Live  </h2>
                    </div>

                    <div class = 'row'>
                        <h3 class = 'num'> 3 </h3>
                        <h2> Make the most $$$ over 30 days and win $10,000!  </h2>
                    </div>
                </div>

                <div class = 'action'>
                    <button id = 'enroll'> Enter the Challenge </button>
                    <h2 id = 'terms'> Terms & Conditions </h2>
                </div>

            </div>

            <div id = 'sec2' class = 'sec terms'>

                <h1> Terms & Conditions </h1>

                <ul>
                    <li>
                        The winner will be announced on November 15th, 2022
                    </li>
                    <li>
                        Creator who generates the most revenue within 30 days of
                        registration wins the challenge
                    </li>
                    <li>
                        To participate in the challnge, you may not be an existing Stan
                        user or have another account on Stan
                    </li>
                    <li>
                        We expect integrity from all the participants. Any form of cheating will
                        result in disqualification at our discretion.
                    </li>
                </ul>

                <button id = 'back'> Back to Challenge </button>
            </div>

         </div>


</body>
<script src = 'https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.1/jquery.js'></script>
<script src="https://cdn.jsdelivr.net/npm/artplayer/dist/artplayer.js"></script>
<script src="script.js"></script>

<script>

/*
const art = new window.Artplayer({
    container: '#video',
    url: '/assets/sample/video.mp4',
});
*/

// button

function Id(id){
    return document.getElementById(id)
}

let TERMS = Id('terms')
let BACK = Id('back')

let ENROLL = Id('enroll')
let USERNAME = Id('username')
let EMAIL = Id('email')
let PASSWORD = Id('password')
let PASSWORD2 = Id('password2')
let SUBMIT = Id('submit')

ENROLL.onclick = () => {
    window.scrollTo({top:0,left:0, behavior: 'smooth'})
    USERNAME.focus()
}

TERMS.onclick = () => {
    window.scrollTo({top:0,left:0, behavior: 'smooth'})
    setTimeout(()=>{
        Id('sec1').classList.remove('active')
        Id('sec2').classList.add('active')
    },300)
}

BACK.onclick = () => {
    Id('sec1').classList.add('active')
    Id('sec2').classList.remove('active')
}
SUBMIT.onclick = submit

//

let u = /^[a-zA-Z0-9_-]+$/
let e = /^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/

let clickLogin = () => {
    const params = new Proxy(new URLSearchParams(window.location.search), {
    get: (searchParams, prop) => searchParams.get(prop),
    });
  fetch ("https://api.staging.stanwith.me/api/v1/authentication/register", {
     method: "POST",
     headers:{
        "Content-Type": "application/json"
     },
     body: JSON.stringify({
        full_name: "Heewon Ahn",
        username: USERNAME.value,
        email: EMAIL.value,
        password: "edmonddantes",
        timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
        ref_user: "",
        utm_source: params.utm_source,
        utm_medium: params.utm_medium,
        utm_campaign: "oct-2022-challenge-10k",
    }),
}).then((response) => response.json())
  .then((result) => {
    if(result.status === "success"){
      window.location = "https://admin.staging.stan.store/auth?token=" + result.token
     } else {
        if (result.errors){
            if (result.errors.username){
            Id('username_msg_2').classList.add('active')
            }else{
                Id('username_msg_2').classList.remove('active')
            }

            if (result.errors.email){
                Id('email_msg_2').classList.add('active')
            }else{
                Id('email_msg_2').classList.remove('active')
            }
        }
     }
  });
}

function submit(){

    let valid = true

    if (!u.test(USERNAME.value)){
        Id('username_msg').classList.add('active')
        valid = false
    }else{
        Id('username_msg').classList.remove('active')
    }

    if (!e.test(EMAIL.value)){
        Id('email_msg').classList.add('active')
        valid = false
    }
    else{
        Id('email_msg').classList.remove('active')
    }

    if (PASSWORD.value.length < 6){
        Id('password_msg').classList.add('active')
        valid = false
    }else{
        Id('password_msg').classList.remove('active')
    }

    if (PASSWORD.value != PASSWORD2.value){
        Id('password2_msg').classList.add('active')
        valid = false
    }else{
        Id('password2_msg').classList.remove('active')
    }

    if (valid){
        clickLogin()
    }
}

</script>
</html>